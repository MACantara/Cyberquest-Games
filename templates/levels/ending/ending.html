{% extends "base.html" %}

{% block title %}CyberQuest - Mission Complete{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-purple-900 text-white">
    <!-- Hero Section -->
    <div class="relative overflow-hidden">
        <!-- Animated Background -->
        <div class="absolute inset-0 opacity-20">
            <div class="floating-particles"></div>
        </div>
        
        <!-- Main Content -->
        <div class="relative z-10 container mx-auto px-4 py-12">
            <!-- Mission Complete Header -->
            <div class="text-center mb-16">
                <div class="w-32 h-32 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-8 animate-pulse">
                    <i class="bi bi-trophy text-6xl text-white"></i>
                </div>
                <h1 class="text-6xl font-bold bg-gradient-to-r from-cyan-400 to-blue-500 bg-clip-text text-transparent mb-4">
                    MISSION COMPLETE
                </h1>
                <p class="text-2xl text-blue-300 mb-6">Agent Nova - Elite Cybersecurity Specialist</p>
                <div class="bg-green-900/30 border border-green-500 rounded-lg p-6 max-w-4xl mx-auto">
                    <h2 class="text-xl font-semibold text-green-300 mb-3">üéâ Congratulations!</h2>
                    <p class="text-green-200 text-lg">
                        You have successfully completed all 10 levels of CyberQuest and proven yourself as an elite cybersecurity professional. 
                        From basic network fundamentals to advanced digital forensics, you've mastered the skills needed to protect our digital world.
                    </p>
                </div>
            </div>

            <!-- Overall Statistics -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Mission Statistics</h2>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 max-w-6xl mx-auto">
                    <div class="bg-slate-800/50 border border-slate-600 rounded-lg p-6 text-center">
                        <div class="text-4xl font-bold text-green-400 mb-2" id="total-score">0</div>
                        <div class="text-slate-300">Total Score</div>
                    </div>
                    <div class="bg-slate-800/50 border border-slate-600 rounded-lg p-6 text-center">
                        <div class="text-4xl font-bold text-blue-400 mb-2" id="completion-time">--:--:--</div>
                        <div class="text-slate-300">Total Time</div>
                    </div>
                    <div class="bg-slate-800/50 border border-slate-600 rounded-lg p-6 text-center">
                        <div class="text-4xl font-bold text-purple-400 mb-2" id="skill-points">0</div>
                        <div class="text-slate-300">Skill Points</div>
                    </div>
                    <div class="bg-slate-800/50 border border-slate-600 rounded-lg p-6 text-center">
                        <div class="text-4xl font-bold text-yellow-400 mb-2" id="achievements">0/30</div>
                        <div class="text-slate-300">Achievements</div>
                    </div>
                </div>
            </div>

            <!-- Level Progress Overview -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Mission Progress</h2>
                <div class="max-w-6xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4" id="level-progress-grid">
                        <!-- Level cards will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Detailed Level Statistics -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Detailed Performance Analysis</h2>
                <div class="max-w-7xl mx-auto space-y-6" id="detailed-stats">
                    <!-- Detailed stats will be populated by JavaScript -->
                </div>
            </div>

            <!-- Skills Mastered -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Skills Mastered</h2>
                <div class="max-w-6xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="skills-grid">
                        <!-- Skills will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Achievements Unlocked -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Achievements Unlocked</h2>
                <div class="max-w-6xl mx-auto">
                    <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4" id="achievements-grid">
                        <!-- Achievements will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Career Path Recommendations -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 text-cyan-400">Your Cybersecurity Career Path</h2>
                <div class="max-w-4xl mx-auto">
                    <div class="bg-gradient-to-r from-purple-900/50 to-blue-900/50 border border-purple-500 rounded-lg p-8">
                        <div class="text-center mb-6">
                            <div class="text-2xl font-semibold text-purple-300 mb-3">Recommended Specializations</div>
                            <p class="text-purple-200">Based on your performance across all levels</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="career-recommendations">
                            <!-- Career recommendations will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Message -->
            <div class="text-center mb-16">
                <div class="bg-slate-800/50 border border-slate-600 rounded-lg p-8 max-w-4xl mx-auto">
                    <h2 class="text-2xl font-bold text-white mb-4">Commander Vega's Final Message</h2>
                    <div class="text-slate-300 text-lg leading-relaxed mb-6">
                        <p class="mb-4">
                            "Agent Nova, your performance throughout this mission has been exceptional. You've demonstrated 
                            not only technical expertise but also the ethical judgment and strategic thinking required of 
                            our elite cybersecurity professionals."
                        </p>
                        <p class="mb-4">
                            "From mastering network fundamentals to uncovering sophisticated threats, you've proven yourself 
                            capable of protecting our digital infrastructure against the most advanced adversaries. 
                            The skills you've developed will serve you well in the ever-evolving landscape of cybersecurity."
                        </p>
                        <p class="text-cyan-300 font-semibold">
                            "Welcome to the ranks of CyberQuest Elite. The digital world is safer with defenders like you."
                        </p>
                    </div>
                    <div class="text-right text-slate-400 italic">
                        - Commander Sarah Vega, CyberQuest Academy
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="text-center space-y-4 mb-12">
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button id="download-certificate" class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105">
                        üìú Download Certificate
                    </button>
                    <button id="share-achievement" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105">
                        üéØ Share Achievement
                    </button>
                    <button id="restart-campaign" class="bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white px-8 py-3 rounded-lg font-semibold transition-all duration-300 transform hover:scale-105">
                        üîÑ Restart Campaign
                    </button>
                </div>
                <div class="mt-6">
                    <a href="/" class="bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-lg transition-colors">
                        üè† Return to Home
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Certificate Modal -->
<div id="certificate-modal" class="hidden fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4">
    <div class="bg-white text-black rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-8" id="certificate-content">
            <!-- Certificate content will be generated -->
        </div>
        <div class="flex justify-center gap-4 p-6 border-t">
            <button id="download-pdf" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg">
                Download PDF
            </button>
            <button id="close-certificate" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg">
                Close
            </button>
        </div>
    </div>
</div>

<style>
/* Floating particles animation */
.floating-particles {
    background-image: 
        radial-gradient(2px 2px at 20px 30px, #00ffff, transparent),
        radial-gradient(2px 2px at 40px 70px, #ff00ff, transparent),
        radial-gradient(1px 1px at 90px 40px, #ffff00, transparent),
        radial-gradient(1px 1px at 130px 80px, #ff0080, transparent),
        radial-gradient(2px 2px at 160px 30px, #00ff80, transparent);
    background-repeat: repeat;
    background-size: 200px 100px;
    animation: float-particles 20s linear infinite;
    width: 100%;
    height: 100%;
}

@keyframes float-particles {
    0% { transform: translate(0, 0) rotate(0deg); }
    33% { transform: translate(30px, -30px) rotate(120deg); }
    66% { transform: translate(-20px, 20px) rotate(240deg); }
    100% { transform: translate(0, 0) rotate(360deg); }
}

/* Level card animations */
.level-card {
    transition: all 0.3s ease;
    transform-style: preserve-3d;
}

.level-card:hover {
    transform: translateY(-10px) rotateY(5deg);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

/* Skill mastery animation */
.skill-mastery {
    animation: skill-glow 2s ease-in-out infinite alternate;
}

@keyframes skill-glow {
    from { box-shadow: 0 0 20px rgba(59, 130, 246, 0.3); }
    to { box-shadow: 0 0 30px rgba(59, 130, 246, 0.6); }
}

/* Achievement unlock animation */
.achievement-unlock {
    animation: achievement-bounce 0.6s ease-out;
}

@keyframes achievement-bounce {
    0% { transform: scale(0) rotate(0deg); }
    50% { transform: scale(1.2) rotate(180deg); }
    100% { transform: scale(1) rotate(360deg); }
}

/* Progress bar animation */
.progress-fill {
    animation: progress-fill 2s ease-out forwards;
}

@keyframes progress-fill {
    from { width: 0%; }
    to { width: var(--progress-width); }
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .floating-particles {
        display: none;
    }
    
    h1 {
        font-size: 3rem !important;
    }
    
    .level-card:hover {
        transform: translateY(-5px);
    }
}

/* Print styles for certificate */
@media print {
    body * {
        visibility: hidden;
    }
    
    #certificate-content, #certificate-content * {
        visibility: visible;
    }
    
    #certificate-content {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
    }
}
</style>

<script type="module" src="{{ url_for('static', filename='js/levels/ending/ending.js') }}"></script>
{% endblock %}